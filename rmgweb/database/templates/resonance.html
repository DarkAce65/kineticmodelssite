{% extends "base.html" %}

 #layout ul li {
    float: left;
    width: 100px;
    margin-top: 10px;
    margin-right: 20px;
    margin-bottom: 10px;
    margin-left: 20px;
    text-align: center;
    }

{% block title %}
RMG Resonance
{% endblock %}

{% block extrahead %}
    <script type="text/javascript">
        var show = function() {
        $('expoct').css('display', 'block');
        }
        var hide = function() {
        $('expoct').css('display', 'none');
        }
    </script>
{% endblock %}

{% block navbar_items %}
<li><a href="{% url 'molecule-search' %}">Molecule Search</a></li>
{% endblock %}

{% block sidebar_items %}
{% endblock %}

{% block page_title %}Resonance Structures{% endblock %}

{% block page_body %}
<h2>Representative Structures:</h2>
    <div style="display: flex; flex-wrap: wrap;">
        {% for struct, class in structure %}
            {% if 'repr' in class %}
                {% if 'repr_oct' in class %}
                    <div style="display: none;" class="{{ class }}">{{ struct|safe }}</div>
                {% else %}
                    <div class="{{ class }}">{{ struct|safe }}</div>
                {% endif %}
            {% endif %}
        {% endfor %}
    </div>

<h2>Unrepresentative Structures:</h2>
    <div style="display: flex; flex-wrap: wrap;">
        {% for struct, class in structure %}
            {% if 'unre' in class %}
                <div class="{{ class }}">{{ struct|safe }}</div>
            {% elif 'repr_expoct' in class %}
                <div style="display: none;" class="{{ class }}">{{ struct|safe }}</div>
            {% elif 'repr_oct' in class %}
                <div class="{{ class }}">{{ struct|safe }}</div>
            {% endif %}
        {% endfor %}
    </div>
    <div>
    <br/>Want to see the representative structure in the other rule?
    </div>
    <button class="switch" type="button" onclick="$('.repr_expoct').toggle();$('.repr_oct').toggle()">Switch to Octet Representative</button>
    <script>
        $(function(){
            $(".switch").click(function () {
                $(this).text(function(i, text){
                    return text === "Switch to Octet Representative" ? "Switch to Expanded Octet Representative" : "Switch to Octet Representative";
                })
            });
        })
    </script>

    <div>
        <h4> Instructions:</h4>
        <p>
            <span style="color:red">RED BOX</span> indicates the input of user<br/>
            Switch between octet-conforming and expanded octet structures only affects third-row elements (currently only sulfur).
        </p>

        <p>
            RMG generates resonance structures using pathway templates in a restricted electronic structure search space (defined by atom types).
            Resonance structures generated by RMG are subsequently filtered to identify representative structures of the resonance hybrid. RMG then only uses these representative structures when generating reactions.
            Note that RMG has an on-the-fly filtration feature which avoids further exploration of resonance structures with a relatively large deviation from an octet or a relatively large charge separation; therefore, the unrepresentative structures list shown above might not be comprehensive.
        </p>
    </div>
{% endblock %}
